"use strict";(self.webpackChunkproxyclient=self.webpackChunkproxyclient||[]).push([[581],{7862:(e,r,o)=>{o.d(r,{A:()=>t});o(5043);const t=o.p+"static/media/book-2-svgrepo-com.a102b1200a61f1a1ea86d67d5995c39a.svg"},9516:(e,r,o)=>{o.d(r,{M:()=>h});var t=o(5043),a=o(6946),s=o(4496),n=o(9314),i=o(4117),c=o(8056),l=o(1249),d=o(7862),p=o(4725),g=o(3896),u=o(4611),_=o(5992),b=o(579);const x=e=>{let{bookId:r,carts:o}=e;const[a,s]=(0,t.useState)(0),n=(0,l.j)(),{t:c}=(0,i.Bd)(["bookCard","error"]),d=(0,t.useCallback)((async e=>{const t=o.find((e=>e.book_id===r));try{t?await n((0,g.I)({book_id:r,amount:t.amount+e,errorMessage:c("error:cartPatchError")})).unwrap():await n((0,g.I)({book_id:r,amount:e,errorMessage:c("error:cartPatchError")})).unwrap(),await n((0,p.Z)()).unwrap()}catch(a){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043a\u043e\u0440\u0437\u0438\u043d\u044b:",a)}s(0)}),[n,r,o]),x=(0,u.d)((e=>{d(e)}),300);return(0,b.jsx)("button",{className:_.A.button__cart,type:"button",onClick:()=>{s((e=>e+1)),x(a+1)},children:c("bookCard:purchase")})},h=e=>{let{id:r,title:o,price:t,descr:p}=e;const g=(0,l.G)((e=>e.cart.item)),{t:u}=(0,i.Bd)(["bookCard"]);return(0,b.jsxs)(n.A,{variant:"outlined",style:{display:"flex",flexDirection:"column"},children:[(0,b.jsxs)(c.A,{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,b.jsx)(s.A,{variant:"h5",component:"div",children:o}),(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,b.jsx)("img",{src:d.A,alt:"Logo",style:{width:"80%",height:"auto"}})}),(0,b.jsx)(s.A,{style:{marginBottom:"10px"},variant:"body2",children:p}),(0,b.jsxs)(s.A,{variant:"body2",children:[u("bookCard:price"),t]})]}),(0,b.jsx)(a.A,{sx:{padding:4,display:"flex",justifyContent:"center"},children:(0,b.jsx)(x,{bookId:r,carts:g})})]})}},4611:(e,r,o)=>{o.d(r,{d:()=>a});var t=o(5043);const a=(e,r)=>{const o=t.useRef(null),a=t.useCallback((t=>{clearTimeout(o.current),o.current=setTimeout((()=>{e(t)}),r)}),[e,r]);return t.useEffect((()=>{clearTimeout(o.current)}),[]),a}},5581:(e,r,o)=>{o.r(r),o.d(r,{default:()=>m});var t=o(5043),a=o(3216),s=o(4117),n=o(4858),i=o(1249),c=o(5068),l=o(3597),d=o(5992),p=o(579);const g=()=>{const e=(0,i.j)(),r=(0,a.Zp)(),{t:o}=(0,s.Bd)(["bookPage","error"]),{handleSubmit:t,register:g,formState:{errors:u}}=(0,n.mN)({mode:"onChange"});return(0,p.jsxs)("form",{onSubmit:t((t=>{const a=o("error:filterBooksError");e((0,l.Lj)({...t,errorMessage:a})),r("?title=".concat(t.title,"&price=").concat(t.price))})),children:[(0,p.jsx)(c.O,{error:u.title,regist:g("title",{required:!0,minLength:2}),placehol:o("bookPage:title"),type:"text"}),(0,p.jsx)(c.O,{error:u.price,regist:g("price",{required:!0,minLength:2}),placehol:o("bookPage:price"),type:"number"}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{className:d.A.button__cart,type:"submit",style:{marginTop:"7px"},children:o("bookPage:search")})})]})};var u=o(9516),_=o(5857),b=o(8337),x=o(8274),h=o(134);const m=()=>{const e=(0,a.Zp)(),{page:r,isLoading:o}=(0,i.G)((e=>e.bookList)),{t:n}=(0,s.Bd)(["error"]),c=(0,i.j)(),d=t.useCallback((r=>{c((0,b.Ir)(r+1));const o={page:r+1,page_size:6,errorMsg:n("error:paginationError")};c((0,l.IU)(o)),e("?page=".concat(r+1),{replace:!0})}),[]),m=(0,i.G)((e=>e.bookList.books));return t.useEffect((()=>{console.log("fethPaginationBooks"),c((0,l.IU)({page:r,page_size:6,errorMsg:n("error:paginationError")}))}),[r]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:x.A.books__container,children:[(0,p.jsx)(g,{}),(0,p.jsx)("div",{className:x.A.books__list,children:o?Array.from({length:6}).map(((e,r)=>(0,p.jsx)(h.A,{},r))):m.map((e=>(0,p.jsx)(u.M,{id:e.id,price:e.price,title:e.title,descr:e.description},e.id)))})]}),(0,p.jsx)(_.W,{pageCount:4,onPageChange:d,forcePage:0})]})}},5857:(e,r,o)=>{o.d(r,{W:()=>u});var t=o(5043),a=o(2157),s=o.n(a),n=o(3825),i=o(3441);const c="pagination_pagination__container__kvJp6",l="pagination_pagination__4SOVM",d="pagination_active__oLQcP",p="pagination_page__item__gMRzS";var g=o(579);const u=t.memo((e=>{let{pageCount:r,onPageChange:o,forcePage:a}=e;const u=(0,t.useMemo)((()=>({color:"#B8C1CC",size:"36px"})),[]),_=(0,t.useMemo)((()=>({color:"#B8C1CC",size:"36px"})),[]);return(0,g.jsx)("div",{className:c,children:(0,g.jsx)(s(),{containerClassName:l,pageClassName:p,activeClassName:d,onPageChange:e=>o(e.selected),pageRangeDisplayed:6,pageCount:r,forcePage:a,renderOnZeroPageCount:null,breakLabel:"...",previousLabel:(0,g.jsx)(i.Vx.Provider,{value:u,children:(0,g.jsx)(n.dnY,{})}),nextLabel:(0,g.jsx)(i.Vx.Provider,{value:_,children:(0,g.jsx)(n.m2f,{})})})})}))},134:(e,r,o)=>{o.d(r,{A:()=>s});o(5043);var t=o(9739),a=o(579);const s=()=>(0,a.jsx)(t.Ay,{speed:2,width:400,height:460,viewBox:"0 0 400 460",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:(0,a.jsx)("rect",{x:"0",y:"-27",rx:"2",ry:"2",width:"100%",height:"100%"})})},8274:(e,r,o)=>{o.d(r,{A:()=>t});const t={books__list:"books_books__list__HHzKm",books__container:"books_books__container__t2ft4",books__wrapper:"books_books__wrapper__W8NWh",books__autor:"books_books__autor__l3k-A"}}}]);
//# sourceMappingURL=581.2af8415d.chunk.js.map