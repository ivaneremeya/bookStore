{"version":3,"file":"static/js/570.11ff0246.chunk.js","mappings":"kIAkCA,MACA,EAAe,IAA0B,sE,gDC/BlC,MAAMA,EAAcA,CACzBC,EACAC,KAEA,MAAMC,EAAaC,EAAAA,OAAoC,MAEjDC,EAAoBD,EAAAA,aACvBE,IACCC,aAAaJ,EAAWK,SACxBL,EAAWK,QAAUC,YAAW,KAC9BR,EAASK,EAAM,GACdJ,EAAM,GAEX,CAACD,EAAUC,IAOb,OAJAE,EAAAA,WAAgB,KACdG,aAAaJ,EAAWK,QAA0B,GACjD,IAEIH,CAAiB,C,0JCXnB,MAAMK,EAAoCC,IAAqB,IAApB,GAAEC,EAAE,OAAEC,GAAQF,EAC9D,MAAOG,EAAcC,GAAmBX,EAAAA,SACtCY,OAAOH,KAEFI,EAAOC,GAAYd,EAAAA,SAAuBS,IAC1CM,EAAOC,GAAYhB,EAAAA,SAAuB,IAC3C,EAAEiB,IAAMC,EAAAA,EAAAA,IAAe,CAAC,WAAY,UAEpCC,GAAWC,EAAAA,EAAAA,KACXC,GAAqBzB,EAAAA,EAAAA,IAAa0B,IACtCH,GACEI,EAAAA,EAAAA,GAAgB,CACdC,QAAShB,EACTC,OAAQa,EACRG,aAAcR,EAAE,0BAEnB,GACA,KAEHjB,EAAAA,WAAgB,KACK0B,WACjB,MAAMC,OChCgBD,iBACHE,EAAAA,GAAcC,IAAI,cAADC,OAAetB,EAAE,OACzCuB,KD8BUC,CAAaxB,GACnCQ,EAASW,EAAQM,SAAS,EAG5BC,EAAY,GACX,CAAC1B,IACJ2B,QAAQC,IAAIrB,EAAO,aAEnB,MAAMsB,EAAef,IACfP,GAASO,IACXR,EAASQ,GACTX,EAAgBC,OAAOU,IACvBD,EAAmBC,GACrB,EA4BIgB,EAAqBC,OAAO7B,IAAiB,EACnD,OACE8B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,UAASC,SAAA,EACtBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,gBAAeC,UAC5BC,EAAAA,EAAAA,KAAA,OAAKC,IAAKC,EAAAA,EAAMC,IAAI,YAEtBH,EAAAA,EAAAA,KAAA,OAAKF,UAAU,kBAAiBC,UAC9BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,gBAAeC,SAAC,mBAEjCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,kBAAiBC,UAC9BC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,eAAcC,SAAE3B,OAE/ByB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mBAAkBC,SAAA,EAC/BC,EAAAA,EAAAA,KAAA,UACEI,KAAK,SACLC,QAASA,IAAMX,EAAYxB,EAAQ,GACnCoC,SAAUX,EACVG,UAAU,WAAUC,SACrB,OAGDC,EAAAA,EAAAA,KAAA,SACEI,KAAK,SACLG,MAAOxC,EACPyC,SAjDcC,IACpB,MAAM,MAAEF,GAAUE,EAAEC,OAEpB,IAAIC,EAAef,OAAOW,GAErBX,OAAOgB,MAAMD,GAQG,KAAVJ,IACTvC,EAAgB,IAChBG,EAAS,KATTwC,EAAeA,EAAevC,EAAQA,EAAQuC,EAE9C3C,EAAgBC,OAAO0C,IACvBxC,EAASwC,GACLA,EAAe,GACjBjC,EAAmBiC,GAKvB,EAkCME,UA/BeJ,IACP,MAAVA,EAAEK,KAAyB,MAAVL,EAAEK,KAAyB,MAAVL,EAAEK,KAAyB,MAAVL,EAAEK,KACvDL,EAAEM,gBACJ,EA6BMjB,UAAU,KACVkB,IAAK5C,KAEP4B,EAAAA,EAAAA,KAAA,UACEI,KAAK,SACLC,QAASA,IAAMX,EAAYxB,EAAQ,GACnC4B,UAAU,UAASC,SACpB,UAIHC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,kBAAiBC,UAC9BC,EAAAA,EAAAA,KAAA,UACEI,KAAK,SACLC,QAASA,IACP7B,GACEI,EAAAA,EAAAA,GAAgB,CACdC,QAAShB,EACTC,OAAQ,EACRgB,aAAcR,EAAE,2BAItBwB,UAAU,iBAAgBC,SAEzBzB,EAAE,iCAGH,E,0DEtFH,MAAM2C,GAAYC,EAAAA,EAAAA,IACvB,mBACAnC,MACEK,EAMA+B,KAEA,IACE,MAAMC,QAAiBnC,EAAAA,GAAcoC,KAAK,uBAAwB,CAChEC,KAAMlC,EAAKkC,KACXC,QAASnC,EAAKmC,QACdC,QAASpC,EAAKoC,UAYhB,OAVAL,EAAS3C,UACPiD,EAAAA,EAAAA,IAAa,CACXC,MAAO,UACPC,MAAOvC,EAAKN,aACZ8C,WAAW,KAGflE,YAAW,MACTmE,EAAAA,EAAAA,IAAS,aAAa,GACrB,MACIT,EAAShC,IAClB,CAAE,MAAO0C,GAQP,OAPAX,EAAS3C,UACPiD,EAAAA,EAAAA,IAAa,CACXC,MAAO,QACPC,MAAOvC,EAAKN,aACZ8C,WAAW,KAGRT,EAASY,gBAAgBD,EAClC,KCrESE,EAA0BA,KACrC,MAAMxD,GAAWC,EAAAA,EAAAA,KACXwD,GAAuBC,EAAAA,EAAAA,IAAgBC,GAAUA,EAAMF,gBACvD,EAAE3D,IAAMC,EAAAA,EAAAA,IAAe,CAAC,iBAAkB,WAE1C,SACJ6D,EACAC,WAAW,OAAEC,GAAQ,aACrBC,EAAY,MACZC,IACEC,EAAAA,EAAAA,MAmBJ,OACEzC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,aAAYC,UACzBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,gBAAeC,UAC5BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,kBAAiBC,UAC9BF,EAAAA,EAAAA,MAAA,QAAM6C,SAAUH,GArBsBnD,IAC5C,MAAMN,EAAeR,EAAE,mBACvBE,EACEyC,EAAU,IAAK7B,EAAMN,kBAIvB0D,GAAO,IAcsCzC,SAAA,EACrCF,EAAAA,EAAAA,MAAA,MAAAE,SAAA,CAAI,IAAEzB,EAAE,2CACRuB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEF,EAAAA,EAAAA,MAAA,SAAO8C,QAAQ,OAAM5C,SAAA,CAClBzB,EAAE,sCACH0B,EAAAA,EAAAA,KAAA,SACEnC,GAAG,OACHuC,KAAK,UACDgC,EAAS,OAAQ,CAAEQ,UAAU,EAAMC,UAAW,SAGrDP,EAAOhB,OACNtB,EAAAA,EAAAA,KAAA,QAAM8C,MAAO,CAAEC,MAAO,OAASC,KAAK,QAAOjD,SAAC,+BAKhDF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEF,EAAAA,EAAAA,MAAA,SAAO8C,QAAQ,UAAS5C,SAAA,CACrBzB,EAAE,wCAEH0B,EAAAA,EAAAA,KAAA,SACEnC,GAAG,UACHuC,KAAK,UACDgC,EAAS,UAAW,CAAEQ,UAAU,EAAMC,UAAW,SAGxDP,EAAOf,UACNvB,EAAAA,EAAAA,KAAA,QAAM8C,MAAO,CAAEC,MAAO,OAASC,KAAK,QAAOjD,SAAC,kCAMlDF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEF,EAAAA,EAAAA,MAAA,SAAO8C,QAAQ,UAAS5C,SAAA,CACrBzB,EAAE,wCACH0B,EAAAA,EAAAA,KAAA,SACEnC,GAAG,UACHuC,KAAK,UACDgC,EAAS,UAAW,CACtBQ,UAAU,EACVC,UAAW,EACXI,OAvDQlE,UACxB,MAAMyC,EAAUf,EAAEC,OAAOH,MACrBiB,QC/BuBzC,OAC7ByC,EACAhD,KAEA,IACE,MAAM4C,QAAiBnC,EAAAA,GAAcC,IAAI,0BAA2B,CAClEgE,OAAQ,CAAE1B,aAIZ,OAFAhD,GAAS2E,EAAAA,EAAAA,GAAgB,KAElB/B,EAAShC,KAAKgE,QACvB,CAAE,MAAOtB,GACP,MAAMhD,EAAY,6BAAAK,OAAgCqC,GAElD,OADAhD,GAAS2E,EAAAA,EAAAA,GAAgBrE,KAClB,CACT,GDiBUuE,CAAgBzD,OAAO4B,GAAUhD,EACzC,SAuDW8D,EAAOd,UACNxB,EAAAA,EAAAA,KAAA,QAAM8C,MAAO,CAAEC,MAAO,OAASC,KAAK,QAAOjD,SAAC,2BAI7CkC,IACCjC,EAAAA,EAAAA,KAAA,QAAM8C,MAAO,CAAEC,MAAO,OAASC,KAAK,QAAOjD,SACxCkC,QAIPjC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,OAAMC,UACnBC,EAAAA,EAAAA,KAAA,UAAQI,KAAK,SAAQL,SAClBzB,EAAE,mDAMT,EEnCV,EAlEiBgF,KACf,MAAOC,EAAMC,GAAWnG,EAAAA,UAAe,IAGjC,EAAEiB,IAAMC,EAAAA,EAAAA,IAAe,CAAC,aAWxBkF,GAAyBvB,EAAAA,EAAAA,IAAgBC,GAAUA,EAAMuB,KAAKC,OAC9DC,GAAqB1B,EAAAA,EAAAA,IAAgBC,GAAUA,EAAMuB,KAAKE,aAEhE,OACE/D,EAAAA,EAAAA,MAAAgE,EAAAA,SAAA,CAAA9D,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAI8C,MAAO,CAAEgB,UAAW,UAAW/D,SAAEzB,EAAE,6BACvCuB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAeC,SAAA,EAC5BC,EAAAA,EAAAA,KAAA,QAAM8C,MAAO,CAAEgB,UAAW,UAAYhE,UAAU,gBAAeC,SAC5DzB,EAAE,6BAEL0B,EAAAA,EAAAA,KAAA,QAAMF,UAAU,kBAAiBC,SAC9BzB,EAAE,+BAELuB,EAAAA,EAAAA,MAAA,QAAMC,UAAU,eAAcC,SAAA,CAAC,IAAEzB,EAAE,0BAA0B,QAC7D0B,EAAAA,EAAAA,KAAA,QAAMF,UAAU,mBAAkBC,SAC/BzB,EAAE,gCAEL0B,EAAAA,EAAAA,KAAA,QAAMF,UAAU,kBAAiBC,SAC9BzB,EAAE,gCAINmF,EAAMM,KAAKL,IACV1D,EAAAA,EAAAA,KAACrC,EAAQ,CAAeE,GAAI6F,EAAK7E,QAASf,OAAQ4F,EAAK5F,QAAxC4F,EAAK7F,OAEtBmC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,SAAQC,UACrBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gCAA+BC,SAAA,EAC5CF,EAAAA,EAAAA,MAAA,QAAAE,SAAA,CAAM,IAAEzB,EAAE,8BACV0B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,eAAejC,GAAG,aAAYkC,SAC1C6D,UAIP5D,EAAAA,EAAAA,KAAA,UAAQI,KAAK,SAASN,UAAU,WAAWO,QA/C9B2D,IAAMR,GAAQ,GA+CoCzD,SAC5DzB,EAAE,gCAEL0B,EAAAA,EAAAA,KAACiE,EAAAA,EAAK,CACJV,KAAMA,EACNW,QAnDYC,IAAMX,GAAQ,GAoD1B,kBAAgB,oBAChB,mBAAiB,0BAAyBzD,UAE1CC,EAAAA,EAAAA,KAACoE,EAAAA,EAAG,CAACC,GApDC,CACZC,SAAU,WACVC,IAAK,MACLC,KAAM,MACNC,UAAW,wBACXC,MAAO,IACPC,QAAS,mBACTC,UAAW,IA6CU7E,UACbC,EAAAA,EAAAA,KAACgC,EAAa,aAInB,C","sources":["app/img/book-2-svgrepo-com.svg","features/cart/utils/UseDebounce.tsx","entities/cartItem/CartItem.tsx","entities/cartItem/api/getBookStock.ts","entities/book-card/books-card/api/CartApi.tsx","pages/cart/ui/makeOrder/MakeOrderCart.tsx","pages/cart/api/ValidZipcodeCart.ts","pages/cart/ui/cartList/CartList.tsx"],"sourcesContent":["var _path, _path2, _path3, _path4;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgBook2SvgrepoCom(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"800px\",\n    height: \"800px\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    opacity: 0.5,\n    d: \"M4.72718 2.73332C5.03258 2.42535 5.46135 2.22456 6.27103 2.11478C7.10452 2.00177 8.2092 2 9.7931 2H14.2069C15.7908 2 16.8955 2.00177 17.729 2.11478C18.5387 2.22456 18.9674 2.42535 19.2728 2.73332C19.5782 3.0413 19.7773 3.47368 19.8862 4.2902C19.9982 5.13073 20 6.24474 20 7.84202L20 18H7.42598C6.34236 18 5.96352 18.0057 5.67321 18.0681C5.15982 18.1785 4.71351 18.4151 4.38811 18.7347C4.27837 18.8425 4.22351 18.8964 4.09696 19.2397C4.02435 19.4367 4 19.5687 4 19.7003V7.84202C4 6.24474 4.00176 5.13073 4.11382 4.2902C4.22268 3.47368 4.42179 3.0413 4.72718 2.73332Z\",\n    fill: \"#1C274D\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20 18H7.42598C6.34236 18 5.96352 18.0057 5.67321 18.0681C5.15982 18.1785 4.71351 18.4151 4.38811 18.7347C4.27837 18.8425 4.22351 18.8964 4.09696 19.2397C3.97041 19.5831 3.99045 19.7288 4.03053 20.02C4.03761 20.0714 4.04522 20.1216 4.05343 20.1706C4.16271 20.8228 4.36259 21.1682 4.66916 21.4142C4.97573 21.6602 5.40616 21.8206 6.21896 21.9083C7.05566 21.9986 8.1646 22 9.75461 22H14.1854C15.7754 22 16.8844 21.9986 17.7211 21.9083C18.5339 21.8206 18.9643 21.6602 19.2709 21.4142C19.4705 21.254 19.6249 21.0517 19.7385 20.75H8C7.58579 20.75 7.25 20.4142 7.25 20C7.25 19.5858 7.58579 19.25 8 19.25H19.9754C19.9926 18.8868 19.9982 18.4741 20 18Z\",\n    fill: \"#1C274D\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.25 7C7.25 6.58579 7.58579 6.25 8 6.25H16C16.4142 6.25 16.75 6.58579 16.75 7C16.75 7.41421 16.4142 7.75 16 7.75H8C7.58579 7.75 7.25 7.41421 7.25 7Z\",\n    fill: \"#1C274D\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 9.75C7.58579 9.75 7.25 10.0858 7.25 10.5C7.25 10.9142 7.58579 11.25 8 11.25H13C13.4142 11.25 13.75 10.9142 13.75 10.5C13.75 10.0858 13.4142 9.75 13 9.75H8Z\",\n    fill: \"#1C274D\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgBook2SvgrepoCom);\nexport default __webpack_public_path__ + \"static/media/book-2-svgrepo-com.a102b1200a61f1a1ea86d67d5995c39a.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\r\n\r\ntype CallbackFunction = (param: number) => void;\r\n\r\nexport const useDebounce = (\r\n  callback: CallbackFunction,\r\n  delay: number,\r\n): CallbackFunction => {\r\n  const timeoutRef = React.useRef<NodeJS.Timeout | null>(null);\r\n\r\n  const debouncedCallback = React.useCallback<CallbackFunction>(\r\n    (param: number) => {\r\n      clearTimeout(timeoutRef.current as NodeJS.Timeout);\r\n      timeoutRef.current = setTimeout(() => {\r\n        callback(param);\r\n      }, delay);\r\n    },\r\n    [callback, delay],\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    clearTimeout(timeoutRef.current as NodeJS.Timeout);\r\n  }, []);\r\n\r\n  return debouncedCallback;\r\n};\r\n","import React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAppDispatch } from \"../../app/store/hook\";\r\nimport { fetchUpdateCart } from \"../../pages/cart/api/fetchUpdateCart\";\r\nimport { useDebounce } from \"../../features/cart/utils/UseDebounce\";\r\nimport logo from \"../../app/img/book-2-svgrepo-com.svg\";\r\nimport { GetStockBook } from \"./api/getBookStock\";\r\n\r\ninterface CartItemProps {\r\n  id: number;\r\n  amount: number;\r\n}\r\n\r\nexport const CartItem: React.FC<CartItemProps> = ({ id, amount }) => {\r\n  const [displayCount, setDisplayCount] = React.useState<string>(\r\n    String(amount),\r\n  );\r\n  const [count, setCount] = React.useState<number>(amount);\r\n  const [stock, setStock] = React.useState<number>(0);\r\n  const { t } = useTranslation([\"cartPage\", \"error\"]);\r\n\r\n  const dispatch = useAppDispatch();\r\n  const debouncedFetchCart = useDebounce((newAmount: number) => {\r\n    dispatch(\r\n      fetchUpdateCart({\r\n        book_id: id,\r\n        amount: newAmount,\r\n        errorMessage: t(\"error:cartPatchError\"),\r\n      }),\r\n    );\r\n  }, 300);\r\n\r\n  React.useEffect(() => {\r\n    const fetchStock = async () => {\r\n      const inStock = await GetStockBook(id);\r\n      setStock(inStock.in_stock);\r\n    };\r\n\r\n    fetchStock();\r\n  }, [id]);\r\n  console.log(stock, \"stockBook\");\r\n\r\n  const onPatchCart = (newAmount: number) => {\r\n    if (stock >= newAmount) {\r\n      setCount(newAmount);\r\n      setDisplayCount(String(newAmount));\r\n      debouncedFetchCart(newAmount);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { value } = e.target;\r\n\r\n    let numericValue = Number(value);\r\n\r\n    if (!Number.isNaN(numericValue)) {\r\n      numericValue = numericValue > stock ? stock : numericValue;\r\n\r\n      setDisplayCount(String(numericValue));\r\n      setCount(numericValue);\r\n      if (numericValue > 0) {\r\n        debouncedFetchCart(numericValue);\r\n      }\r\n    } else if (value === \"\") {\r\n      setDisplayCount(\"\");\r\n      setCount(0);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === \"-\" || e.key === \"+\" || e.key === \",\" || e.key === \".\") {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  const isDecreaseDisabled = Number(displayCount) <= 1;\r\n  return (\r\n    <div className=\"product\">\r\n      <div className=\"product-image\">\r\n        <img src={logo} alt=\"Logo\" />\r\n      </div>\r\n      <div className=\"product-details\">\r\n        <div className=\"product-title\">Samuel Rios</div>\r\n      </div>\r\n      <div className=\"product-removal\">\r\n        <p className=\"stok-product\">{stock}</p>\r\n      </div>\r\n      <div className=\"product-quantity\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => onPatchCart(count - 1)}\r\n          disabled={isDecreaseDisabled}\r\n          className=\"qt-minus\"\r\n        >\r\n          -\r\n        </button>\r\n        <input\r\n          type=\"number\"\r\n          value={displayCount}\r\n          onChange={handleChange}\r\n          onKeyDown={handleKeyDown}\r\n          className=\"qt\"\r\n          max={stock}\r\n        />\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => onPatchCart(count + 1)}\r\n          className=\"qt-plus\"\r\n        >\r\n          +\r\n        </button>\r\n      </div>\r\n      <div className=\"product-removal\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={() =>\r\n            dispatch(\r\n              fetchUpdateCart({\r\n                book_id: id,\r\n                amount: 0,\r\n                errorMessage: t(\"error:cartPatchError\"),\r\n              }),\r\n            )\r\n          }\r\n          className=\"remove-product\"\r\n        >\r\n          {t(\"cartPage:cartPageRemove\")}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { AxiosInstance } from \"../../../shared/api/auth\";\r\n\r\nexport const GetStockBook = async (id: number) => {\r\n  const response = await AxiosInstance.get(`/api/books/${id}/`);\r\n  return response.data;\r\n};\r\n","import { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { redirect } from \"react-router-dom\";\r\nimport { setAlertType } from \"../../../../shared/ui/alert/AlertSlice\";\r\nimport { AxiosInstance } from \"../../../../shared/api/auth\";\r\n\r\nexport interface PostCart {\r\n  book_id: number;\r\n  amount: number;\r\n}\r\n\r\nexport interface CartItemProps extends PostCart {\r\n  city: string;\r\n  address: string;\r\n  zipcode: string;\r\n  id: number;\r\n  state: string;\r\n  user_id: number;\r\n  warranty_days: number;\r\n  new_price: number;\r\n  orders_id: string;\r\n  orders_time: string | Date;\r\n}\r\n\r\nexport interface CartList {\r\n  persons_discounted_price: number;\r\n  products: Array<CartItemProps>;\r\n  total: number;\r\n}\r\nexport interface CartAddress {\r\n  city: string;\r\n  address: string;\r\n  zipcode: string;\r\n}\r\n\r\nexport interface Order {\r\n  order_id: string;\r\n  total: number;\r\n  persons_discounted_price: number;\r\n  products: Array<CartItemProps>;\r\n  status: string;\r\n}\r\n\r\nexport const makeOrder = createAsyncThunk(\r\n  \"order/makeOrder\",\r\n  async (\r\n    data: {\r\n      city: string;\r\n      address: string;\r\n      zipcode: string;\r\n      errorMessage: string;\r\n    },\r\n    thunkApi,\r\n  ) => {\r\n    try {\r\n      const response = await AxiosInstance.post(\"api/cart/make_order/\", {\r\n        city: data.city,\r\n        address: data.address,\r\n        zipcode: data.zipcode,\r\n      });\r\n      thunkApi.dispatch(\r\n        setAlertType({\r\n          title: \"success\",\r\n          descr: data.errorMessage,\r\n          isVizible: true,\r\n        }),\r\n      );\r\n      setTimeout(() => {\r\n        redirect(\"/BooksList\");\r\n      }, 1500);\r\n      return response.data as Order;\r\n    } catch (error) {\r\n      thunkApi.dispatch(\r\n        setAlertType({\r\n          title: \"error\",\r\n          descr: data.errorMessage,\r\n          isVizible: true,\r\n        }),\r\n      );\r\n      return thunkApi.rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n","import React from \"react\";\r\nimport { useForm, FieldValues, SubmitHandler } from \"react-hook-form\";\r\nimport \"./MakeOrderCart.scss\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAppDispatch, useAppSelector } from \"../../../../app/store/hook\";\r\nimport { validateZipcode } from \"../../api/ValidZipcodeCart\";\r\nimport {\r\n  makeOrder,\r\n  CartAddress,\r\n} from \"../../../../entities/book-card/books-card/api/CartApi\";\r\n\r\nexport const MakeOrderCart: React.FC = () => {\r\n  const dispatch = useAppDispatch();\r\n  const zipcodeError: string = useAppSelector((state) => state.zipcodeError);\r\n  const { t } = useTranslation([\"makeOrderModal\", \"error\"]);\r\n\r\n  const {\r\n    register,\r\n    formState: { errors },\r\n    handleSubmit,\r\n    reset,\r\n  } = useForm();\r\n\r\n  const onSubmit: SubmitHandler<FieldValues> = (data: FieldValues) => {\r\n    const errorMessage = t(\"error:makeOrder\");\r\n    dispatch(\r\n      makeOrder({ ...data, errorMessage } as CartAddress & {\r\n        errorMessage: string;\r\n      }),\r\n    );\r\n    reset();\r\n  };\r\n\r\n  const handleZipcodeBlur = async (e: React.FocusEvent<HTMLInputElement>) => {\r\n    const zipcode = e.target.value;\r\n    if (zipcode) {\r\n      await validateZipcode(Number(zipcode), dispatch);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"cart-order\">\r\n      <div className=\"cart__wrapper\">\r\n        <div className=\"cart__container\">\r\n          <form onSubmit={handleSubmit(onSubmit)}>\r\n            <h1> {t(\"makeOrderModal:makeOrderModalDetail\")}</h1>\r\n            <div className=\"name\">\r\n              <div>\r\n                <label htmlFor=\"city\">\r\n                  {t(\"makeOrderModal:makeOrderModalCity\")}\r\n                  <input\r\n                    id=\"city\"\r\n                    type=\"text\"\r\n                    {...register(\"city\", { required: true, minLength: 1 })}\r\n                  />\r\n                </label>\r\n                {errors.city && (\r\n                  <span style={{ color: \"red\" }} role=\"alert\">\r\n                    This field is required\r\n                  </span>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"address\">\r\n                  {t(\"makeOrderModal:makeOrderModalAdress\")}\r\n\r\n                  <input\r\n                    id=\"address\"\r\n                    type=\"text\"\r\n                    {...register(\"address\", { required: true, minLength: 1 })}\r\n                  />\r\n                </label>\r\n                {errors.address && (\r\n                  <span style={{ color: \"red\" }} role=\"alert\">\r\n                    This field is required\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"zipcode\">\r\n                {t(\"makeOrderModal:makeOrderModalZicope\")}\r\n                <input\r\n                  id=\"zipcode\"\r\n                  type=\"text\"\r\n                  {...register(\"zipcode\", {\r\n                    required: true,\r\n                    minLength: 1,\r\n                    onBlur: handleZipcodeBlur,\r\n                  })}\r\n                />\r\n              </label>\r\n              {errors.zipcode && (\r\n                <span style={{ color: \"red\" }} role=\"alert\">\r\n                  This field is required\r\n                </span>\r\n              )}\r\n              {zipcodeError && (\r\n                <span style={{ color: \"red\" }} role=\"alert\">\r\n                  {zipcodeError}\r\n                </span>\r\n              )}\r\n            </div>\r\n            <div className=\"btns\">\r\n              <button type=\"submit\">\r\n                {t(\"makeOrderModal:makeOrderModalMaking\")}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { AxiosInstance } from \"../../../shared/api/auth\";\r\nimport { AppDispatch } from \"../../../app/store/store\";\r\nimport { setZipcodeError } from \"../ui/makeOrder/model/zipcodeSlice\";\r\n\r\nexport const validateZipcode = async (\r\n  zipcode: number,\r\n  dispatch: AppDispatch,\r\n) => {\r\n  try {\r\n    const response = await AxiosInstance.get(\"api/cart/check_zipcode/\", {\r\n      params: { zipcode },\r\n    });\r\n    dispatch(setZipcodeError(\"\"));\r\n\r\n    return response.data.is_valid;\r\n  } catch (error) {\r\n    const errorMessage = `Error validating zipcode: ${zipcode}`;\r\n    dispatch(setZipcodeError(errorMessage));\r\n    return false;\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport Box from \"@mui/material/Box\";\r\nimport { useAppSelector } from \"../../../../app/store/hook\";\r\nimport { CartItem } from \"../../../../entities/cartItem/CartItem\";\r\nimport { CartItemProps } from \"../../../../entities/book-card/books-card/api/CartApi\";\r\nimport \"./Cart.scss\";\r\nimport { MakeOrderCart } from \"../makeOrder/MakeOrderCart\";\r\n\r\nconst CartList = () => {\r\n  const [open, setOpen] = React.useState(false);\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n  const { t } = useTranslation([\"cartPage\"]);\r\n\r\n  const style = {\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    width: 400,\r\n    bgcolor: \"background.paper\",\r\n    boxShadow: 24,\r\n  };\r\n  const carts: CartItemProps[] = useAppSelector((state) => state.cart.item);\r\n  const totalPrice: number = useAppSelector((state) => state.cart.totalPrice);\r\n\r\n  return (\r\n    <>\r\n      <h1 style={{ textAlign: \"center\" }}>{t(\"cartPage:cartPageTitle\")}</h1>\r\n      <div className=\"shopping-cart\">\r\n        <div className=\"column-labels\">\r\n          <span style={{ textAlign: \"center\" }} className=\"product-image\">\r\n            {t(\"cartPage:cartPageImage\")}\r\n          </span>\r\n          <span className=\"product-details\">\r\n            {t(\"cartPage:cartPageProduct\")}\r\n          </span>\r\n          <span className=\"stok-product\"> {t(\"cartPage:cartPageStock\")} </span>\r\n          <span className=\"product-quantity\">\r\n            {t(\"cartPage:cartPageQuantity\")}\r\n          </span>\r\n          <span className=\"product-removal\">\r\n            {t(\"cartPage:cartPageRemove\")}\r\n          </span>\r\n        </div>\r\n\r\n        {carts.map((cart) => (\r\n          <CartItem key={cart.id} id={cart.book_id} amount={cart.amount} />\r\n        ))}\r\n        <div className=\"totals\">\r\n          <div className=\"totals-item totals-item-total\">\r\n            <span> {t(\"cartPage:cartPagePrice\")}</span>\r\n            <div className=\"totals-value\" id=\"cart-total\">\r\n              {totalPrice}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <button type=\"button\" className=\"checkout\" onClick={handleOpen}>\r\n          {t(\"cartPage:cartPageCheckout\")}\r\n        </button>\r\n        <Modal\r\n          open={open}\r\n          onClose={handleClose}\r\n          aria-labelledby=\"modal-modal-title\"\r\n          aria-describedby=\"modal-modal-description\"\r\n        >\r\n          <Box sx={style}>\r\n            <MakeOrderCart />\r\n          </Box>\r\n        </Modal>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport default CartList;\r\n"],"names":["useDebounce","callback","delay","timeoutRef","React","debouncedCallback","param","clearTimeout","current","setTimeout","CartItem","_ref","id","amount","displayCount","setDisplayCount","String","count","setCount","stock","setStock","t","useTranslation","dispatch","useAppDispatch","debouncedFetchCart","newAmount","fetchUpdateCart","book_id","errorMessage","async","inStock","AxiosInstance","get","concat","data","GetStockBook","in_stock","fetchStock","console","log","onPatchCart","isDecreaseDisabled","Number","_jsxs","className","children","_jsx","src","logo","alt","type","onClick","disabled","value","onChange","e","target","numericValue","isNaN","onKeyDown","key","preventDefault","max","makeOrder","createAsyncThunk","thunkApi","response","post","city","address","zipcode","setAlertType","title","descr","isVizible","redirect","error","rejectWithValue","MakeOrderCart","zipcodeError","useAppSelector","state","register","formState","errors","handleSubmit","reset","useForm","onSubmit","htmlFor","required","minLength","style","color","role","onBlur","params","setZipcodeError","is_valid","validateZipcode","CartList","open","setOpen","carts","cart","item","totalPrice","_Fragment","textAlign","map","handleOpen","Modal","onClose","handleClose","Box","sx","position","top","left","transform","width","bgcolor","boxShadow"],"sourceRoot":""}